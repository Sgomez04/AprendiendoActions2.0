name: Github Actions Matrix

on:
  push:
    branches:
      - main

jobs:
  get_info:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v2

      - name: Reading config.json and setting environment variables
        run: |
          properties=$(jq -r 'keys[]' ./config.json)
          while IFS= read -r property; do
            value=$(jq -r ".$property" ./config.json )
            echo "$property=$value" >> $GITHUB_ENV
          done <<< "$properties"

      - name: Show environment variables
        run: echo "$(<$GITHUB_ENV)"
